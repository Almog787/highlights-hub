name: Generate README
on:
  push:
    branches:
      - main
  workflow_run:
    workflows: ["Update Cartoon Streams"] # ×•×•×“× ×©×–×” ×”×©× ×”×ž×“×•×™×§ ×©×œ ×§×•×‘×¥ ×”-Action ×”×©× ×™ ×©×œ×š
    types:
      - completed

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Generate README File
        run: |
          echo "# ðŸŽ¨ Toon Universe | Premium Kids Hub" > README.md
          echo "" >> README.md
          echo "[![Site Status](https://img.shields.io/website?url=https%3A%2F%2Falmog787.github.io%2Fhighlights-hub%2F&logo=googlechrome&logoColor=white)](https://almog787.github.io/highlights-hub/)" >> README.md
          echo "[![Maintenance](https://img.shields.io/badge/Maintained%3F-yes-green.svg)](https://github.com/Almog787/highlights-hub/graphs/commit-activity)" >> README.md
          echo "[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)" >> README.md
          echo "" >> README.md
          echo "## ðŸ”— Official Streaming Portal" >> README.md
          echo "Watch 24/7 cartoons and full episodes of **The Moomins** here:" >> README.md
          echo "### ðŸ‘‰ **[https://almog787.github.io/highlights-hub/](https://almog787.github.io/highlights-hub/)**" >> README.md
          echo "" >> README.md
          echo "---" >> README.md
          echo "" >> README.md
          echo "## ðŸš€ Project Overview" >> README.md
          echo "Toon Universe is a sophisticated, AI-curated video hub. It features a custom **No-API Scraper** that dynamically collects live animation streams and archives legendary series like *The Moomins (Hebrew Dubbed)*, organized by episode order." >> README.md
          echo "" >> README.md
          echo "### ðŸ› ï¸ Key Features" >> README.md
          echo "* ðŸ„ **The Moomins Collection:** Automated fetching and sorting of full episodes in Hebrew." >> README.md
          echo "* ðŸ¤– **No-API Scraper:** Python-based crawler using YouTube internal metadata (bypass API limits)." >> README.md
          echo "* ðŸ“º **24/7 Live TV:** Real-time broadcasting of global cartoon channels." >> README.md
          echo "* ðŸ’Ž **Premium UI:** Glassmorphism design with staggered fade-in animations." >> README.md
          echo "* ðŸ”„ **Full Automation:** GitHub Actions handle scraping and deployment every 6 hours." >> README.md
          echo "" >> README.md
          echo "## ðŸ“Š System Architecture" >> README.md
          echo "| Component | Technology |" >> README.md
          echo "| :--- | :--- |" >> README.md
          echo "| **Bot Logic** | Python (yt-dlp + Regex sorting) |" >> README.md
          echo "| **Database** | Dynamic JSON storage (streams.json) |" >> README.md
          echo "| **Frontend** | HTML5, CSS3 (Outfit Font), Vanilla JS |" >> README.md
          echo "| **Automation** | GitHub Actions Workflow |" >> README.md
          echo "| **Last Update** | $(date -u '+%Y-%m-%d %H:%M:%S') UTC |" >> README.md
          echo "" >> README.md
          echo "## ðŸ‘¨â€ðŸ’» Developer" >> README.md
          echo "**Project Architect:** [Almog787](https://github.com/Almog787)" >> README.md
          echo "" >> README.md
          echo "---" >> README.md
          echo "*This README is automatically re-generated every time the scraper completes its cycle.*" >> README.md

      - name: Commit and Push changes
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "docs: update README with Moomins collection & premium UI" || exit 0
          git push
